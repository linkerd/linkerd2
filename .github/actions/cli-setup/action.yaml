
name: CLI Setup
description: Fetches the Linkerd CLI from an artifact and installs it into the target.

inputs:
  artifact-id:
    description: The ID of the artifact to download.
    required: true
  target:
    description: The path to install the CLI into.
    required: true

runs:
  using: composite
  steps:
    - uses: actions/download-artifact@37930b1c2abaa49bbe596cd826c3c89aef350131
      with:
        artifact-ids: ${{ inputs.artifact-id }}
        path: ${{ runner.temp }}/cli
    - run: mv ${{ runner.temp }}/cli/linkerd2-cli-*-linux-amd64 ${{ inputs.target }} && chmod 755 ${{ inputs.target }}
      shell: bash
